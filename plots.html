<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Identifying Food Deserts</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="plots.html">Food Deserts</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="http://github.com/tl3279/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Identifying Food Deserts</h1>

</div>


<pre>
留言板
1. 优化了一下图片排版（字体，标题，大小之类的），其他都没改 
</pre>
<p><br></p>
<div id="data-importing-and-cleaning" class="section level2">
<h2>Data Importing and Cleaning</h2>
<p>Visit <a href="report.html">this page</a> for detailed steps on how
the data is cleaned.</p>
<pre class="r"><code>population_data =
  read_excel(&quot;nyc2020_census_blocks.xlsx&quot;) |&gt;
  slice(-c(1:6)) |&gt;
  mutate(
    borough_code = as.numeric(substr(GeoID, 1, 1)), 
    tract_number = substr(GeoID, 2, 7),
    fips_county = case_when(
      borough_code == 1 ~ &quot;061&quot;,
      borough_code == 2 ~ &quot;005&quot;,
      borough_code == 3 ~ &quot;047&quot;,
      borough_code == 4 ~ &quot;081&quot;,
      borough_code == 5 ~ &quot;085&quot; 
    ),
    geoid = paste0(&quot;36&quot;, fips_county, tract_number)
  ) |&gt;
  group_by(geoid) |&gt;
  summarize(total_population = sum(Pop1, na.rm = TRUE)) 

nyc_tracts = 
  st_read(
    &quot;2020 Census Tracts/geo_export_ae979acf-b46a-42af-a79f-874d7b450fc8.shp&quot;,
    quiet = TRUE)|&gt;
  left_join(population_data, by = &quot;geoid&quot;) |&gt;
  mutate(
    pop_bins = cut(
      total_population,
      breaks = c(0, 1000, 5000, 10000, 15000, 200000),
      labels = c(&quot;0 - 1,000&quot;, &quot;1,001 - 5,000&quot;, &quot;5,001 - 10,000&quot;, &quot;10,000 - 15,000&quot;, &quot;15,001 - 20,000&quot;),
      include.lowest = TRUE
    )
  )

retail_stores = 
  read_csv(&quot;Retail_Food_Stores.csv&quot;) |&gt;
  janitor::clean_names() |&gt;
  filter(county %in% c(&quot;BRONX&quot;, &quot;KINGS&quot;, &quot;NEW YORK&quot;, &quot;RICHMOND&quot;, &quot;QUEENS&quot;),
         !str_detect(establishment_type, &quot;B|C|D&quot;)) |&gt;
  mutate(county = recode(county,
    &quot;BRONX&quot; = &quot;Bronx&quot;,
    &quot;KINGS&quot; = &quot;Brooklyn&quot;,
    &quot;NEW YORK&quot; = &quot;Manhattan&quot;,
    &quot;RICHMOND&quot; = &quot;Staten Island&quot;,
    &quot;QUEENS&quot; = &quot;Queens&quot;
  )) |&gt;
  mutate(geometry = st_as_sfc(georeference)) |&gt;
  st_as_sf() |&gt;
  st_set_crs(4326)

retail_stores =
  retail_stores |&gt;
  filter(square_footage &gt;= 2000) |&gt;
  mutate(
    category = case_when(
      square_footage &lt; 5000 ~ &quot;Small&quot;,
      square_footage &lt;= 9000 ~ &quot;Medium&quot;,
      square_footage &gt; 9000 ~ &quot;Large&quot;
    )
  )
buffered_stores = 
  retail_stores |&gt;
  st_transform(crs = 2263) |&gt;
  mutate(
    buffer_radius = case_when(
      category == &quot;Small&quot; ~ 5280*0.15,
      category == &quot;Medium&quot; ~ 5280*0.25,
      category == &quot;Large&quot; ~ 5280*0.35
    )
  ) |&gt;
  mutate(geometry = st_buffer(geometry, dist = buffer_radius))</code></pre>
</div>
<div id="nyc-population" class="section level2">
<h2>NYC Population</h2>
<p>This plot shows the population distribution across New York City’s
census tracts using data from the 2020 New York City Decennial Census
Data. Manhattan exhibits the highest population density, with
significant concentrations in its central and southern regions. In
contrast, areas like Staten Island show comparatively lower population
densities.</p>
<pre class="r"><code>nyc_tracts |&gt;
  ggplot() +
  annotation_map_tile(zoom = 12, type = &quot;cartolight&quot;) +  
  geom_sf(aes(fill = pop_bins), color = &quot;white&quot;, lwd = 0.2) +
  scale_fill_manual(
    values = c(&quot;white&quot;, &quot;#fee5d9&quot;, &quot;#fcbba1&quot;, &quot;#fc9272&quot;, &quot;#fb6a4a&quot;, &quot;#de2d26&quot;),
    name = &quot;Population by Census Tract&quot;
  ) +
  labs(
    title = &quot;Distribution of Population Density&quot;,
    subtitle = &quot;New York City&quot;
  ) +
  theme_minimal() +
  theme(
    legend.position = c(0.05, 0.9), 
    legend.justification = c(0, 1), 
    legend.background = element_rect(fill = &quot;white&quot;, color = &quot;black&quot;),
    plot.title = element_text(size=17.5, hjust=0.5),
    plot.subtitle = element_text(hjust=0.5)
  )</code></pre>
<p><img src="plots_files/figure-html/unnamed-chunk-3-1.png" width="768" /></p>
</div>
<div id="retail-stores-location" class="section level2">
<h2>Retail Stores Location</h2>
<p>To identify food deserts, we examined the distribution of retail
stores across New York City. To enhance visualization and clarity, the
analysis is divided into two geographic regions: <strong>Manhattan +
Bronx</strong> and <strong>Brooklyn + Queens + Staten
Island</strong>.</p>
<div id="manhattan-and-bronx" class="section level3">
<h3>Manhattan and Bronx</h3>
<p>The map below depicts the locations of retail stores in Manhattan and
the Bronx, plotted over a population density map by census tract.</p>
<pre class="r"><code>nyc_tracts |&gt;
  filter(boroname %in% c(&quot;Manhattan&quot;, &quot;Bronx&quot;)) |&gt;
  ggplot() +
  annotation_map_tile(zoom = 12, type = &quot;cartolight&quot;) + 
  geom_sf(aes(fill = pop_bins), color = &quot;white&quot;, lwd = 0.2) +
  geom_sf(data = retail_stores |&gt;
            filter(county %in% c(&quot;Manhattan&quot;, &quot;Bronx&quot;)), color = &quot;darkblue&quot;, size = 2) +
  scale_fill_manual(
    values = c(&quot;white&quot;, &quot;#fee5d9&quot;, &quot;#fcbba1&quot;, &quot;#fc9272&quot;, &quot;#fb6a4a&quot;, &quot;#de2d26&quot;),
    name = &quot;Population by Census Tract&quot;
  ) +
  labs(
    title = &quot;Population Distribution and Retail Store Locations&quot;,
    subtitle = &quot;Manhattan and Bronx&quot;
  ) +
  theme_minimal() +
  theme(
    legend.position = c(0.05, 0.9), 
    legend.justification = c(0, 1), 
    legend.background = element_rect(fill = &quot;white&quot;, color = &quot;black&quot;),
    plot.title = element_text(size=17.5, hjust=0.5),
    plot.subtitle = element_text(hjust=0.5)
  )</code></pre>
<p><img src="plots_files/figure-html/unnamed-chunk-4-1.png" width="768" /></p>
<p>Retail stores are heavily concentrated in central and lower
Manhattan, which aligns with areas of higher population density and
commercial activity. The Bronx shows a more evenly distributed pattern
of retail stores. However, northern and central Bronx census tracts with
higher populations have fewer stores, indicating possible underserved
areas.</p>
<p>We will add coverage zones that align with population density to
highlight underserved areas that may require interventions to improve
access to nutritious food.</p>
<pre class="r"><code>nyc_tracts |&gt;
  filter(boroname %in% c(&quot;Manhattan&quot;, &quot;Bronx&quot;)) |&gt;
  ggplot() +
  annotation_map_tile(zoom = 12, type = &quot;cartolight&quot;) + 
  geom_sf(aes(fill = pop_bins),
    color = &quot;white&quot;, lwd = 0.2
  ) +
  geom_sf(
    data = buffered_stores |&gt; filter(county %in% c(&quot;Manhattan&quot;, &quot;Bronx&quot;)),
    aes(fill = category),
    alpha = 0.4,
    color = NA
  ) +
  geom_sf(
    data = retail_stores |&gt; filter(county %in% c(&quot;Manhattan&quot;, &quot;Bronx&quot;)),
    aes(color = category),
    alpha = 0.6,
    size = 1.5
  ) +
  scale_fill_manual(
    values = c(
      &quot;Small&quot; = &quot;yellow&quot;, &quot;Medium&quot; = &quot;green&quot;, &quot;Large&quot; = &quot;blue&quot;,
      &quot;0 - 1,000&quot; = &quot;#fee5d9&quot;, &quot;1,001 - 5,000&quot; = &quot;#fcbba1&quot;,
      &quot;5,001 - 10,000&quot; = &quot;#fc9272&quot;, &quot;10,000 - 15,000&quot; = &quot;#fb6a4a&quot;,
      &quot;15,001 - 20,000&quot; = &quot;#de2d26&quot;
    ),
    breaks = c(&quot;Small&quot;, &quot;Medium&quot;, &quot;Large&quot;), 
    name = &quot;Store Category&quot;
  ) +
  scale_color_manual(
    values = c(&quot;Small&quot; = &quot;yellow&quot;, &quot;Medium&quot; = &quot;green&quot;, &quot;Large&quot; = &quot;blue&quot;),
    guide = &quot;none&quot;
  ) +
  labs(
    title = &quot;Population Distribution and Retail Store Coverage&quot;,
    subtitle = &quot;Manhattan and Bronx&quot;
  ) +
  theme_minimal() +
  theme(
    legend.position = c(0.05, 0.9), 
    legend.justification = c(0, 1), 
    legend.background = element_rect(fill = &quot;white&quot;, color = &quot;black&quot;),
    plot.title = element_text(size=17.5, hjust=0.5),
    plot.subtitle = element_text(hjust=0.5)
  )</code></pre>
<p><img src="plots_files/figure-html/unnamed-chunk-5-1.png" width="768" /></p>
<p>For Manhattan, overlapping coverage zones indicate high
accessibility, suggesting these areas are well-served by retail options.
For the Bronx, retail stores are less densely distributed, especially in
the upper-left corner, where coverage zones are nearly absent. This
highlights potential food desert areas with limited access to retail
stores</p>
</div>
<div id="brooklyn-queens-and-staten-island" class="section level3">
<h3>Brooklyn, Queens, and Staten Island</h3>
<p>In this visualization, the distribution of retail stores across
Brooklyn, Queens, and Staten Island is shown overlaid on the population
density map by census tract.</p>
<pre class="r"><code>nyc_tracts |&gt;
  filter(boroname %in% c(&quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;)) |&gt;
  ggplot() +
  annotation_map_tile(zoom = 12, type = &quot;cartolight&quot;) + 
  geom_sf(aes(fill = pop_bins), color = &quot;white&quot;, lwd = 0.2) +
  geom_sf(data = retail_stores |&gt;
            filter(county %in% c(&quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;)), color = &quot;darkblue&quot;, size = 2) +
  scale_fill_manual(
    values = c(&quot;white&quot;, &quot;#fee5d9&quot;, &quot;#fcbba1&quot;, &quot;#fc9272&quot;, &quot;#fb6a4a&quot;, &quot;#de2d26&quot;),
    name = &quot;Population by Census Tract&quot;
  ) +
  labs(
    title = &quot;Population Distribution and Retail Store Locations&quot;,
    subtitle = &quot;Brooklyn, Queens, and Staten Island&quot;
  ) +
  theme_minimal() +
  theme(
    legend.position = c(0.05, 0.9), 
    legend.justification = c(0, 1),
    legend.background = element_rect(fill = &quot;white&quot;, color = &quot;black&quot;),
    plot.title = element_text(size=17.5, hjust=0.5),
    plot.subtitle = element_text(hjust=0.5)
  )</code></pre>
<p><img src="plots_files/figure-html/unnamed-chunk-6-1.png" width="768" /></p>
<p>Brooklyn has a high density of retail stores, particularly in areas
of moderate to high population density. Queens also displays significant
coverage of retail stores, though there are noticeable gaps in the
central and eastern parts of the borough. Staten Island has retail
stores distributed relatively loosely, and the southernmost tracts with
lower population density have limited retail store presence.</p>
<pre class="r"><code>nyc_tracts |&gt;
  filter(boroname %in% c(&quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;)) |&gt;
  ggplot() +
  annotation_map_tile(zoom = 12, type = &quot;cartolight&quot;) + 
  geom_sf(aes(fill = pop_bins),
    color = &quot;white&quot;, lwd = 0.2
  ) +
  geom_sf(
    data = buffered_stores |&gt; 
      filter(county %in% c(&quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;)),
    aes(fill = category),
    alpha = 0.4,
    color = NA
  ) +
  geom_sf(
    data = retail_stores |&gt; 
      filter(county %in% c(&quot;Brooklyn&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;)),
    aes(color = category),
    alpha = 0.6,
    size = 1.5
  ) +
  scale_fill_manual(
    values = c(
      &quot;Small&quot; = &quot;yellow&quot;, &quot;Medium&quot; = &quot;green&quot;, &quot;Large&quot; = &quot;blue&quot;,
      &quot;0 - 1,000&quot; = &quot;#fee5d9&quot;, &quot;1,001 - 5,000&quot; = &quot;#fcbba1&quot;,
      &quot;5,001 - 10,000&quot; = &quot;#fc9272&quot;, &quot;10,000 - 15,000&quot; = &quot;#fb6a4a&quot;,
      &quot;15,001 - 20,000&quot; = &quot;#de2d26&quot;
    ),
    breaks = c(&quot;Small&quot;, &quot;Medium&quot;, &quot;Large&quot;), 
    name = &quot;Store Category&quot;
  ) +
  scale_color_manual(
    values = c(&quot;Small&quot; = &quot;yellow&quot;, &quot;Medium&quot; = &quot;green&quot;, &quot;Large&quot; = &quot;blue&quot;),
    guide = &quot;none&quot;
  ) +
  labs(
    title = &quot;Population and Retail Store Coverage&quot;,
    subtitle = &quot;Brooklyn, Queens, and Staten Island&quot;
  ) +
  theme_minimal() +
  theme(
    legend.position = c(0.05, 0.9),
    legend.justification = c(0, 1),
    legend.background = element_rect(fill = &quot;white&quot;, color = &quot;black&quot;),
    plot.title = element_text(size=17.5, hjust=0.5),
    plot.subtitle = element_text(hjust=0.5)
  )</code></pre>
<p><img src="plots_files/figure-html/unnamed-chunk-7-1.png" width="768" /></p>
<p>For Brooklyn, the coverage zones overlap significantly in densely
populated areas but small gaps remain in the eastern parts. Queens has a
mix of small and medium store coverage, indicating moderate coverage.
Sparse large store buffers in some areas leave room for improvement,
especially in central and eastern Queens. For Staten Island, the
southernmost and central tracts have very few store buffers, indicating
potential food desert areas.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
